<div class="background-container">
  <!-- Background Image -->
  <!-- <img src="/assets/image/three.jpg" alt="Background Image" class="background-image"> -->

  <!-- Container -->
  <div class="container">
    <h1 class="text-xl font-bold mb-4 text-center">Class Requests for Approval</h1>

    <!-- Search and Filter Section -->
    <div class="search-filter mb-4 flex justify-between items-center">
      <!-- Search by Class Name -->
      <input
        type="text"
        placeholder="Search by Class Name"
        class="bg-[#FFF5E0] border border-[#7ABA78] text-[#0A6847] text-sm rounded-lg focus:border-[#7ABA78] block w-1/3 p-2.5"
        [(ngModel)]="searchClassName"
        (input)="filterRequests()"
      />

      <!-- Dropdown Filter by Status -->
      <select
        class="bg-white border border-gray-300 text-sm rounded-lg block w-1/4 p-2.5"
        [(ngModel)]="statusFilter"
        (change)="filterRequests()"
      >
        <option value="">All Statuses</option>
        <option value="Pending">Pending</option>
        <option value="Approved">Approved</option>
        <option value="Rejected">Rejected</option>
      </select>
    </div>

    <!-- Display if No Data -->
    <div *ngIf="filteredRequests.length === 0" class="text-center mt-4">
      <p class="text-gray-500">Oops! No records found</p>
    </div>

    <!-- Table Display -->
    <table class="table-auto border-collapse border border-gray-300 w-full" *ngIf="filteredRequests.length > 0">
      <thead class="bg-gray-800 text-white">
        <tr>
          <th class="border border-gray-900 px-4 py-2">S.No</th>
          <th class="border border-gray-900 px-4 py-2">Class Name</th>
          <th class="border border-gray-900 px-4 py-2">User ID</th>
          <th class="border border-gray-900 px-4 py-2">Request Date</th>
          <th class="border border-gray-900 px-4 py-2">Status</th>
          <th class="border border-gray-900 px-4 py-2">Actions</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let request of paginatedRequests; let i = index">
          <td class="border border-gray-900 px-4 py-2 text-center">{{ (currentPage - 1) * itemsPerPage + i + 1 }}</td>
          <td class="border border-gray-900 px-4 py-2">{{ getClassName(request.cookingClassId) }}</td>
          <td class="border border-gray-900 px-4 py-2 text-center">{{ request.userId }}</td>
          <td class="border border-gray-900 px-4 py-2 text-center">{{ request.requestDate }}</td>
          <td class="border border-gray-900 px-4 py-2 text-center">{{ request.status }}</td>
          <td class="border border-gray-900 px-4 py-2 text-center flex gap-2">
            <button
              class="bg-green-500 hover:bg-green-700 text-white font-bold py-1 px-3 rounded"
              (click)="approveRequest(request)"
              [disabled]="request.status !== 'Pending'"
            >
              Approve
            </button>
            <button
              class="bg-red-500 hover:bg-red-700 text-white font-bold py-1 px-3 rounded"
              (click)="rejectRequest(request)"
              [disabled]="request.status !== 'Pending'"
            >
              Reject
            </button>
          </td>
        </tr>
      </tbody>
    </table>

    <!-- Pagination Section -->
    <div class="pagination mt-4 flex justify-center">
      <button
        *ngFor="let page of [].constructor(totalPages); let i = index"
        class="bg-gray-300 hover:bg-gray-400 text-black font-bold py-1 px-3 rounded mx-1"
        (click)="changePage(i + 1)"
      >
        {{ i + 1 }}
      </button>
    </div>
  </div>
</div>
