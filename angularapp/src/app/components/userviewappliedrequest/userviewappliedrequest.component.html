<div class="container mx-auto px-4 py-8">
  <h1 class="text-xl font-bold leading-tight tracking-tight text-[#0A6847] md:text-2xl mb-6">Applied Class Requests</h1>
  
  <!-- Search Bar -->
  <div class="mb-6">
    <div class="relative">
      <div class="absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none">
        <svg class="w-4 h-4 text-gray-500" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 20 20">
          <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m19 19-4-4m0-7A7 7 0 1 1 1 8a7 7 0 0 1 14 0Z"/>
        </svg>
      </div>
      <input 
        type="text" 
        [(ngModel)]="searchTerm" 
        (keyup)="searchRequests()"
        class="bg-[#FFF5E0] border border-[#7ABA78] text-[#0A6847] text-sm rounded-lg block w-full p-2.5 pl-10" 
        placeholder="Search by Class Name">
    </div>
  </div>

  <!-- No Applied Classes Message -->
  <div *ngIf="filteredRequests.length === 0" class="text-center py-8">
    <p class="text-lg text-gray-600">You haven't applied for any cooking classes yet.</p>
    <button routerLink="/user/view-classes" class="mt-4 bg-[#0A6847] hover:bg-[#7ABA78] text-white font-medium py-2 px-4 rounded">
      View Available Classes
    </button>
  </div>

  <!-- Applied Classes Table -->
  <div *ngIf="filteredRequests.length > 0" class="overflow-x-auto">
    <table class="w-full text-sm text-left text-[#0A6847]">
      <thead class="text-xs uppercase bg-[#0A6847] text-white">
        <tr>
          <th scope="col" class="px-6 py-3">Class Name</th>
          <th scope="col" class="px-6 py-3">Applied Date</th>
          <th scope="col" class="px-6 py-3">Status</th>
          <th scope="col" class="px-6 py-3">Actions</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let request of filteredRequests" class="bg-[#FFF5E0] border-b hover:bg-[#FFEFD5]">
          <td class="px-6 py-4">{{ request.className }}</td>
          <td class="px-6 py-4">{{ request.requestDate | date }}</td>
          <td class="px-6 py-4">
            <span 
              [ngClass]="{
                'bg-yellow-100 text-yellow-800': request.status === 'Pending',
                'bg-green-100 text-green-800': request.status === 'Approved',
                'bg-red-100 text-red-800': request.status === 'Rejected'
              }"
              class="px-2 py-1 rounded-full text-xs font-medium">
              {{ request.status }}
            </span>
          </td>
          <td class="px-6 py-4">
            <button 
              (click)="confirmDelete(request.cookingClassRequestId)" 
              [disabled]="!canDelete(request.status)"
              [ngClass]="{
                'bg-red-500 hover:bg-red-700 text-white font-bold py-1 px-3 rounded': canDelete(request.status),
                'bg-gray-400 text-gray-700 cursor-not-allowed py-1 px-3 rounded': !canDelete(request.status)
              }">
              Delete
            </button>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <!-- Delete Confirmation Modal -->
  <div *ngIf="showDeleteModal" class="fixed inset-0 bg-black bg-opacity-10 flex justify-center items-center">
    <div class="bg-white rounded-lg p-6 w-96 max-w-md">
      <h2 class="text-xl font-bold mb-4 text-[#0A6847]">Confirm Delete</h2>
      <p class="mb-6">Are you sure you want to delete this class request?</p>
      <div class="flex justify-end space-x-4">
        <button 
          (click)="closeDeleteModal()" 
          class="px-4 py-2 bg-gray-300 text-gray-800 rounded hover:bg-gray-400">
          Cancel
        </button>
        <button 
          (click)="deleteRequest()" 
          class="px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700">
          Yes, Delete
        </button>
      </div>
    </div>
  </div>
</div>